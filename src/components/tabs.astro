---
// TabInterface.astro
---

<div class="tabs-container">
  <div class="tabs-wrapper relative p-2" id="tabsWrapper">
    <button
      class="tab-button px-3 py-1.5 z-10 font-medium relative inline-block p-2 transition duration-150 ease-in-out hover:border-[#FFFBD7]"
    >
      <a href="https://x.com/theblapse" target="_blank">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
          class="w-[20px] md:w-[24px] h-[20px] md:h-[24px] fill-[#FFFBD7]"
        >
          <path
            d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"
          ></path></svg
        >
      </a>
    </button>
    <button
      class="tab-button px-3 py-1.5 z-10 font-medium relative inline-block p-2 transition duration-150 ease-in-out hover:border-[#FFFBD7]"
    >
      <a href="mailto:hi@bad.al" target="_blank">
        <svg
          viewBox="0 0 24 24"
          width="24"
          height="24"
          stroke="currentColor"
          stroke-width="2"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="w-[20px] md:w-[24px] h-[20px] md:h-[24px]"
          ><path
            d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
          ></path><polyline points="22,6 12,13 2,6"></polyline></svg
        >
      </a>
    </button>
    <button
      class="tab-button px-3 py-1.5 z-10 font-medium relative inline-block p-2 transition duration-150 ease-in-out hover:border-[#FFFBD7]"
    >
      <a href="https://github.com/theblapse" target="_blank">
        <svg
          viewBox="0 0 24 24"
          class="w-[20px] md:w-[24px] h-[20px] md:h-[24px]"
          stroke="currentColor"
          stroke-width="2"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><path
            d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
          ></path></svg
        >
      </a>
    </button>
    <button
      class="tab-button px-3 py-1.5 z-10 font-medium relative inline-block p-2 transition duration-150 ease-in-out hover:border-[#FFFBD7]"
    >
      <a href="https://goodreads.com/theblapse" target="_blank">
        <svg
          viewBox="0 0 50 50"
          class="w-[20px] md:w-[24px] h-[20px] md:h-[24px]"
          stroke="currentColor"
          stroke-width="2"
          fill="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><path
            d="M 25 2 C 20.459 2 16.58664 3.9082151 13.982422 6.9453125 C 11.378203 9.9824099 10 14.07975 10 18.5 C 10 22.92025 11.378203 27.017589 13.982422 30.054688 C 16.58664 33.091785 20.459 35 25 35 C 29.531588 35 33.395936 33.098395 36 30.072266 L 36 35 C 36 37.598543 35.181497 39.764071 33.548828 41.339844 C 31.91616 42.915616 29.363725 44 25.5 44 C 17.784314 44 15 39.933333 15 36 L 11 36 C 11 42.066667 16.215686 48 25.5 48 C 30.136275 48 33.83384 46.622274 36.326172 44.216797 C 38.818503 41.811319 40 38.476457 40 35 L 40 18.5 L 40 3 L 36 3 L 36 6.9277344 C 33.395936 3.9016049 29.531588 2 25 2 z M 25 6 C 28.459 6 31.08664 7.3379255 32.982422 9.5488281 C 34.878203 11.759731 36 14.91225 36 18.5 C 36 22.08775 34.878203 25.240269 32.982422 27.451172 C 31.08664 29.662074 28.459 31 25 31 C 21.541 31 18.91336 29.662074 17.017578 27.451172 C 15.121797 25.240269 14 22.08775 14 18.5 C 14 14.91225 15.121797 11.759731 17.017578 9.5488281 C 18.91336 7.3379255 21.541 6 25 6 z"
          ></path></svg
        >
      </a>
    </button>
    <button
      class="tab-button px-3 py-1.5 z-10 font-medium relative inline-block p-2 transition duration-150 ease-in-out hover:border-[#FFFBD7]"
    >
      <a href="https://last.fm/user/theblapse" target="_blank">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          shape-rendering="geometricPrecision"
          text-rendering="geometricPrecision"
          class="w-[20px] md:w-[24px] h-[20px] md:h-[24px]"
          fill-rule="evenodd"
          clip-rule="evenodd"
          viewBox="0 0 512 512"
          ><path
            fill="#FFFBD7"
            d="M256 0c141.385 0 256 114.615 256 256S397.385 512 256 512 0 397.385 0 256 114.615 0 256 0z"
          ></path><path
            fill="#0D0D0D"
            d="M237.665 323.44l-11.421-30.947s-18.499 20.644-46.225 20.644c-24.587 0-41.999-21.356-41.999-55.513 0-43.742 22.071-59.393 43.743-59.393 31.297 0 41.255 20.272 49.818 46.236l11.42 35.549c11.415 34.519 32.776 62.255 94.284 62.255 44.109 0 74.035-13.536 74.035-49.092 0-28.813-16.385-43.743-46.971-50.903l-22.748-4.969c-15.658-3.572-20.271-9.958-20.271-20.646 0-12.078 9.591-19.241 25.248-19.241 17.101 0 26.326 6.427 27.72 21.729l35.554-4.249c-2.854-32.042-24.926-45.205-61.21-45.205-32.041 0-63.344 12.079-63.344 50.908 0 24.211 11.765 39.488 41.26 46.597l24.21 5.704c18.128 4.255 24.205 11.764 24.205 22.079 0 13.162-12.801 18.501-37.006 18.501-35.924 0-50.908-18.874-59.4-44.832l-11.765-35.55c-14.868-46.291-38.712-63.351-86.026-63.351-52.313 0-80.096 33.067-80.096 89.312 0 54.056 27.726 83.243 77.608 83.243 40.165 0 59.393-18.874 59.393-18.874l-.016.006v.002z"
          ></path></svg
        >
      </a>
    </button>
    <button
      class="tab-button px-3 py-1.5 z-10 font-medium relative inline-block p-2 transition duration-150 ease-in-out hover:border-[#FFFBD7]"
    >
      <a
        href="https://open.spotify.com/user/k858xiwlv3p7cppmv105ug12y"
        target="_blank"
      >
        <svg
          viewBox="0 0 496 512"
          class="w-[20px] md:w-[24px] h-[20px] md:h-[24px]"
          fill="#FFFBD7"
        >
          <path
            d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"
          ></path></svg
        >
      </a>
    </button>

    <div
      class="tab-highlight absolute rounded-md transition-all duration-200"
      id="tabHighlight"
    >
    </div>
  </div>
</div>

<style>
  .tabs-container {
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
  }

  .tabs-wrapper {
    position: relative;
    display: flex;
    gap: 8px;
  }

  .tab-button {
    background: transparent;
    border: 2px solid transparent;
    border-radius: 6px;
    cursor: pointer;
    position: relative;
    transition: border-color 0.2s ease;
  }

  .tab-highlight {
    border: 2px solid #fffbd7;
    border-radius: 1000px;
    background: transparent;
    height: 100%;
    pointer-events: none;
    transform: translateX(-100%);
    opacity: 0;
  }

  .tab-button:hover ~ .tab-highlight {
    opacity: 1;
  }
</style>

<script>
  let currentHoveredTab: HTMLButtonElement | null = null;
  const highlight = document.getElementById("tabHighlight") as HTMLElement;
  const tabButtons = document.querySelectorAll(".tab-button");

  function updateHighlight(tab: HTMLButtonElement | null) {
    if (!tab || !highlight) return;

    const rect = tab.getBoundingClientRect();
    const parentRect = tab.parentElement?.getBoundingClientRect();

    if (parentRect) {
      highlight.style.width = `${rect.width}px`;
      highlight.style.transform = `translateX(${rect.left - parentRect.left}px)`;
      highlight.style.opacity = "1";
    }
  }

  function removeHighlight() {
    if (highlight) {
      highlight.style.opacity = "0";
    }
  }

  tabButtons.forEach((button) => {
    button.addEventListener("mouseenter", () => {
      currentHoveredTab = button as HTMLButtonElement;
      updateHighlight(currentHoveredTab);
    });

    button.addEventListener("mouseleave", () => {
      currentHoveredTab = null;
      removeHighlight();
    });
  });
</script>
